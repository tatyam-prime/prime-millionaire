<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>タイマー</title>
<style>
#timerA {
	display: inline-block;
	cursor: pointer;
	width: 384px;
	text-align: center;
	border: 1px solid #400;
	background: #fcc;
}
span.textTimerA {
	font-size: 800%;
	color: #866;
}
span.textTimerA.moving {
	font-size: 800%;
	color: #400;
}
#timerB {
	display: inline-block;
	cursor: pointer;
	width: 384px;
	text-align: center;
	border: 1px solid #004;
	background: #ccf;
}
span.textTimerB {
	font-size: 800%;
	color: #668;
}
span.textTimerB.moving {
	font-size: 800%;
	color: #004;
}
</style>
</head>
<body>

<div id="timerA"><span id="textA" class="textTimerA"></span></div>
<div id="timerB"><span id="textB" class="textTimerB"></span></div>
<input type="button" value="リセット" onclick="resetTimer();">

<script src="https://peterolson.github.io/BigInteger.js/BigInteger.min.js"></script>
<script>
	var timerLength = 600;
	var countA = timerLength;
	var countB = timerLength;
	var movingA = false;
	var movingB = false;
	var timerIDA;
	var timerIDB;
	function timerFormat(second) {
        var str = String(second / 10);
        if(second % 10 === 0) str += ".0"
        return str;
	}
	document.getElementById("textA").innerHTML = timerFormat(countA);
	document.getElementById("textB").innerHTML = timerFormat(countB);
	document.getElementById("timerA").onclick = function() {
		clearInterval(timerIDA);
        clearInterval(timerIDB);
        if (movingB) {
        	document.getElementById("textB").classList.remove("moving");
			movingB = false;
        }
        if (movingA) {
        	document.getElementById("textA").classList.remove("moving");
			movingA = false;
        }
		else if (countA) {
			timerIDA = setInterval("countTimerA()", 100);
			movingA = true;
			document.getElementById("textA").classList.add("moving");
		}
	};
	document.getElementById("timerB").onclick = function() {
		clearInterval(timerIDA);
        clearInterval(timerIDB);
        if (movingA) {
        	document.getElementById("textA").classList.remove("moving");
			movingA = false;
        }
        if (movingB) {
        	document.getElementById("textB").classList.remove("moving");
			movingB = false;
        }
		else if (countB) {
			timerIDB = setInterval("countTimerB()", 100);
			movingB = true;
			document.getElementById("textB").classList.add("moving");
		}
	};
	function countTimerA() {
		countA--;
		document.getElementById("textA").innerHTML = timerFormat(countA);
		if(countA === 0) {
			clearInterval(timerIDA);
			document.getElementById("textA").classList.remove("moving");
			movingA = false;
		}
	}
    function countTimerB() {
		countB--;
		document.getElementById("textB").innerHTML = timerFormat(countB);
		if(countB === 0) {
			clearInterval(timerIDB);
			document.getElementById("textB").classList.remove("moving");
			movingB = false;
		}
	}
	function resetTimer() {
		clearInterval(timerIDA);
        clearInterval(timerIDB);
		countA = timerLength;
		countB = timerLength;
		movingA = false;
		movingB = false;
		document.getElementById("textA").innerHTML = timerFormat(countA);
		document.getElementById("textB").innerHTML = timerFormat(countB);
		document.getElementById("textA").classList.remove("moving");
		document.getElementById("textB").classList.remove("moving");
	}
</script>
</body>
</html>
